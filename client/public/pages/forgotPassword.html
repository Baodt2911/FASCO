<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../../src/css/output.css" type="text/css" />
    <link rel="stylesheet" href="../../src/css/custom.css" type="text/css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
    <title>Forgot password</title>
  </head>
  <body>
    <main class="w-full h-screen flex justify-center items-center">
      <!-- Container -->
      <div
        class="relative w-3/4 h-[800px] grid grid-rows-1 grid-cols-2 gap-x-32"
      >
        <!-- image  -->
        <div class="w-full h-full">
          <img
            class="w-full h-full object-cover"
            src="https://images.zen.com.tn/medias/folder_12_12_2023/8_U2_A1395_0597a9a2a3.webp"
            alt=""
          />
        </div>
        <!-- card forgot password  -->
        <div class="w-full h-full pt-12">
          <!-- title  -->
          <h1 class="font-volkhov text-6xl text-[#484848] mb-32">FASCO</h1>
          <h3 class="font-volkhov text-3xl">Forget Password</h3>
          <!-- Email  -->
          <div class="w-full border-b border-[#9D9D9D] px-2 pb-2 mt-10">
            <input
              type="text"
              id="email-forget"
              placeholder="Email address"
              name="email"
              class="font-poppins outline-none w-full h-full pr-10"
            />
          </div>
          <!-- button send code -->
          <button
            id="btn-send"
            class="mt-10 block w-full h-14 mx-auto bg-black text-white font-poppins font-semibold rounded-xl shadow-xl"
          >
            Send
          </button>
          <p class="font-poppins text-center mt-5">
            Already have an account?
            <a href="../pages/signIn.html" class="text-[#5B86E5]">Login</a>
          </p>
        </div>
        <span class="absolute bottom-0 right-0 font-poppins"
          >FASCO Terms & Codnitions</span
        >
      </div>
      <div id="notification"></div>
    </main>
  </body>
  <script type="module">
    import { isLoggedIn, url_api, notification } from "../../src/js/utils.js";
    const isLogin = await isLoggedIn();
    if (isLogin) {
      window.location.href = "index.html";
    }
    const email = document.getElementById("email-forget");
    const btnSend = document.getElementById("btn-send");
    const handleForgetPassword = async () => {
      if (!email.value) {
        return;
      }
      btnSend.classList.add("animate-spin");
      try {
        const res = await fetch(url_api + "/auth/forget-password", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({ email: email.value }),
        });
        const { message } = await res.json();
        notification({ message, status: "success" });
        btnSend.classList.remove("animate-spin");
      } catch (error) {
        console.log(error);
      }
    };
    btnSend.addEventListener("click", handleForgetPassword);
  </script>
  <script src="../../src/js/main.js" type="module"></script>
</html>
